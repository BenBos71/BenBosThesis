<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Feelings Survey</title>
    <link rel="stylesheet" href="../css/main.css">
    <script src="../js/main.js"></script>
    <script>
        window.addEventListener('load', function() {
            document.body.style.display = 'none';
            startTime = Date.now();
            // Set the source of the image element to display the random image
            // Retrieve the image_dir value from sessionStorage
            var imageDir = sessionStorage.getItem("image_dir");

            // Check if the value is not "none"
            if (imageDir !== "none") {
                // Update the src attribute of the image element
                document.getElementById("image_display").src = "../images/survey_images/" + imageDir + 
            "/20.jpg";
            }
            document.getElementById("sentence").textContent = "A phone rang in the room.";

            // Get dropdown var
            var dropdownMenu = document.getElementById("myDropdown");
            dropdownMenu.style.display = "none";
            document.body.style.display = 'flex';
        });
    </script>
  </head>
    <body>
    <br />
    <div class="content">
        <img id="image_display" src="" alt="" class="ind_pic"/>
        <br />
        <p id="sentence"></p>
        <br />
        <form id="demoForm" >
            <div class="dropdown">
                <p>Emotion:</p>
                <button type="button" onclick="toggleDropdown()" class="dropbtn" id="dropbtn">Click here to select an option:</button>
                <div id="myDropdown" class="dropdown-content">
                    <a href="#" onclick="selectOption('Enjoyment')">Enjoyment</a>
                    <a href="#" onclick="selectOption('Sadness')">Sadness</a>
                    <a href="#" onclick="selectOption('Anger')">Anger</a>
                    <a href="#" onclick="selectOption('Contempt')">Contempt</a>
                    <a href="#" onclick="selectOption('Disgust')">Disgust</a>
                    <a href="#" onclick="selectOption('Fear')">Fear</a>
                    <a href="#" onclick="selectOption('Surprise')">Surprise</a>
                </div>
            </div>
            <div>
                <p>Positive or Negative:</p>
                <div class="radio-group">
                    <input type="radio" id="positive" name="radioOption" value="positive">
                    <label for="positive">Positive</label><br>

                    <input type="radio" id="negative" name="radioOption" value="negative">
                    <label for="negative">Negative</label><br>
                </div>
            </div>
            <input type="hidden" id="selectedOption" name="selectedOption" value="">
            <input type="submit"  value="Next" class="subButt"/>
        </form>
    </div>
    <br />
    <script type="text/javascript">
        document.getElementById('demoForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form from submitting the traditional way
            validateForm(event); // Call the validation function
        });

        function next(valence)
        { 
            if (valence === 'positive') {
                valence = 'p';
            } else {
                valence = 'n';
            }
            sessionStorage.setItem('time20', Date.now() - startTime);
            sessionStorage.setItem('emote20_e', document.getElementById("selectedOption").value);
            sessionStorage.setItem('emote20_v', valence);
            window.location.assign('survey_21.html');
        }
    </script>
  </body>
</html>