<!-- <!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>CinSandE</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="https://www.google.com/recaptcha/api.js?render=6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY"></script>
    <script>
      function executeRecaptcha() {
          grecaptcha.ready(function() {
              grecaptcha.execute('6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY', {action: 'homepage'}).then(function(token) {
                  var recaptchaResponse = document.createElement('input');
                  recaptchaResponse.setAttribute('type', 'hidden');
                  recaptchaResponse.setAttribute('name', 'g-recaptcha-response');
                  recaptchaResponse.setAttribute('value', token);
                  document.getElementById('myForm').appendChild(recaptchaResponse);
              });
          });
      }

      window.onload = executeRecaptcha;
    </script>
  </head>
  <body>
    <form id="myForm" action="/submit" method="POST">
      Your form fields here
      <button type="submit">Submit</button>
    <!รท-- </form> -->
  <!-- </body> -->
<!-- </html> -->
   <!-- <script type="text/javascript">
    document.getElementById('myForm').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent form from submitting the traditional way
      reCap_to_index();
    });

    function reCap_to_index() {
      // Navigate to the new page
      window.location.assign('index2.html');
    }
  </script> -->

<!-- <!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>CinSandE</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://www.google.com/recaptcha/api.js"></script>
</head>
<body>
  <div>
    <form id="myForm" action="https://fierce-escarpment-41876-06bb2cc451d1.herokuapp.com/verify-recaptcha" method="POST">
      <button class="g-recaptcha" 
              data-sitekey="6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY"
              data-callback='onSubmit'
              data-action="submit">Submit</button>
    </form>
  </div>
  <script>
    function onSubmit(token) {
      document.getElementById("myForm").submit();
      window.location.assign('index2.html');
    }
  </script>
</body>
</html> -->


<!-- <!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>CinSandE</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://www.google.com/recaptcha/api.js"></script>
</head>
<body>
  <div class="form-container">
    <form id="myForm" action="https://fierce-escarpment-41876-06bb2cc451d1.herokuapp.com/verify-recaptcha" method="POST">
      <div class="recaptcha-container">
        <div class="g-recaptcha" 
             data-sitekey="6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY"
             data-callback='onSubmit'></div>
      </div>
      <br/>
      <button type="submit">Submit</button>
    </form>
  </div>
  <script>
    function onSubmit(token) {
      document.getElementById("myForm").submit();
      // Optionally, you can handle the redirection here if needed
      window.location.assign('index2.html');
    }
  </script>
</body>
</html> -->


<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>CinSandE</title>
  <link rel="stylesheet" href="css/main.css">
  <script src="https://www.google.com/recaptcha/api.js?render=6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY"></script>
</head>
<body>
  <div class="form-container">
    <form id="myForm" action="https://fierce-escarpment-41876-06bb2cc451d1.herokuapp.com/verify-recaptcha" method="POST">
      <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">
      <br/>
      <button type="submit" id="submit-button">Submit</button>
    </form>
  </div>
  <!-- <script>
    grecaptcha.ready(function() {
      document.getElementById('submit-button').addEventListener('click', function(event) {
        event.preventDefault();
        grecaptcha.execute('6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY', {action: 'submit'}).then(function(token) {
          document.getElementById('g-recaptcha-response').value = token;
          document.getElementById('myForm').submit();
          // Optionally, you can handle the redirection here if needed
          // window.location.assign('index2.html');
        });
      });
    });
  </script> -->
  <script>
    grecaptcha.ready(function() {
      document.getElementById('submit-button').addEventListener('click', function(event) {
        event.preventDefault();
        grecaptcha.execute('6LfKYPspAAAAAIvluFDF1LNjiAIGp_ZnqPmnW3aY', {action: 'submit'}).then(function(token) {
          document.getElementById('g-recaptcha-response').value = token;
  
          // Use fetch to send the form data and handle redirection based on the response
          const form = document.getElementById('myForm');
          const formData = new FormData(form);
          
          fetch(form.action, {
            method: 'POST',
            body: formData
          })
          .then(response => response.text())
          .then(data => {
            if (data.includes('CAPTCHA verified successfully.')) {
              window.location.assign('index2.html');
            } else {
              alert('CAPTCHA verification failed.');
            }
          })
          .catch(error => {
            console.error('Error:', error);
          });
        });
      });
    });
  </script>
  
</body>
</html>
